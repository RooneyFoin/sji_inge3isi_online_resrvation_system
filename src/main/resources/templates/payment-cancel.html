<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Cancelled</title>
  <link rel="icon" th:href="@{/images/favicon.png}" type="image/x-icon">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #ffe0e0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }
    .cross {
      font-size: 60px;
      color: #f44336;
    }
    button {
      padding: 10px 20px;
      background-color: #f44336;
      color: white;
      border: none;
      margin-top: 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="cross">âœ–</div>
<h2>Payment Cancelled</h2>
<p>You can try again or contact support.</p>
<button id="success">Back to Reservation</button>
<script th:inline="javascript">
  /*<![CDATA[*/
  // Extract everything from the user object
  const user = /*[[${user}]]*/ {};
  const userId = user?.id || 0; // Derive from user object

  // Debug log
  console.log("User object:", user);
  console.log("Derived userId:", userId);
  /*]]>*/
</script>
<script>
  document.getElementById("success").addEventListener("click", function() {
    window.location.href = `/pay-redirect/${userId}`;
  });
  setTimeout(() => {
    window.location.href = `/pay-redirect/${userId}`;
  }, 3000);
</script>
</body>
</html>
